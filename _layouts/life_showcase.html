<!DOCTYPE html>
<html>
<head>
    {% include head.html %}
    <!-- =================================================================
    === CSS 修正：直接攻擊 Header 預設樣式，並為全局背景加上濾鏡
    ================================================================== -->
    <style>
        /* 1. 【核心修正】強制將內頁 header 嘅背景變透明，消滅「陰魂」 */
        body:not(.is-front) header#header {
            background-color: transparent !important;
            /* 下面呢兩句係用嚟移除 header 預設嘅頂圖 */
            background-image: none !important;
            border-bottom: none !important;
        }

        /* 2. 【核心修正】為我哋嘅「畫布」加上深色濾鏡 */
        .page-wrapper::before {
            content: '';
            position: fixed; /* 用 fixed 令佢覆蓋全螢幕 */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(20, 25, 30, 0.6); /* 60% 透明度嘅深灰色濾鏡 */
            z-index: -1; /* 將濾鏡放喺背景圖之上，但喺所有內容之下 */
        }
        .page-wrapper {
            position: relative;
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
            background-repeat: no-repeat;
        }
        
        /* 3. 強制將 #main 嘅背景變透明，確保濾鏡同背景可以透出嚟 */
        #main.gallery-main {
            background-color: transparent !important;
            max-width: 1200px;
            margin: 0 auto;
            padding: 4em 2em;
        }
        #main.gallery-main > section, #banner { border: none; padding-top:0; padding-bottom:0; }
        
        /* 4. Banner 內文區域，保持原有佈局 */
        #banner { background-color: transparent !important; }
        #banner .inner { padding: 8em 0 6em 0; }
        
        /* --- 以下係碎片樣式，完全不變 --- */
        
        .post-fragment{position:relative;background-size:cover;background-position:center center;margin-bottom:4em;min-height:60vh;width:85%;box-shadow:0 10px 30px rgba(0,0,0,0.3);transition:transform .3s ease-out}
        .post-fragment:nth-child(odd){margin-left:0;margin-right:auto}
        .post-fragment:nth-child(even){margin-left:auto;margin-right:0}
        .post-fragment:hover{transform:scale(1.02)}
        .post-fragment .text-content{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(20,25,30,0.8);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:2em;opacity:0;transition:opacity .4s ease}
        .post-fragment:hover .text-content{opacity:1}
        .post-fragment .text-content h2,.post-fragment .text-content p{color:#fff!important}
        .post-fragment .text-content h2{font-size:2em!important}
        .post-fragment .text-content p{max-width:80%}
        .post-fragment .click-area{position:absolute;top:0;left:0;width:100%;height:100%;z-index:3}
    </style>
</head>

<body>

    <div class="page-wrapper" style="background-image: url('{{ site.baseurl }}/{{ page.image }}');">

        {% include header.html %}

        <section id="banner">
            <div class="inner">
                <header class="major">
                    <h1>{{ page.title }}</h1>
                </header>
                <div class="content">
                    <p>{{ page.description }}</p>
                </div>
            </div>
        </section>

        <div id="main" class="gallery-main">
            <section>
                {% assign life_posts = site.posts | where: "category", "Life" | reverse %}
                {% for post in life_posts %}
                    <article class="post-fragment" style="background-image: url('{{ site.baseurl }}/{{ post.image }}');">
                        <a href="{{ post.url | relative_url }}" class="click-area" aria-label="{{ post.title }}"></a>
                        <div class="text-content">
                            <h2>{{ post.title }}</h2>
                            <p>{{ post.subtitle }}</p>
                            <p><small>{{ post.date | date: "%Y-%m-%d" }}</small></p>
                        </div>
                    </article>
                {% endfor %}
            </section>
        </div>

        {% include footer.html %}

    </div>

</body>
</html>
